<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ—¥æœ¬è‡ªé§•éŠåŠ©æ‰‹ v2.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; color: #334155; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
<body>

<div id="app" class="max-w-md mx-auto bg-white min-h-screen relative shadow-2xl flex flex-col overflow-hidden">

    <div v-if="currentView === 'itinerary'" class="flex flex-col h-full">
        <header class="bg-white/95 backdrop-blur sticky top-0 z-20 border-b border-slate-100 px-6 py-4">
            <div class="flex justify-between items-end">
                <div>
                    <h2 class="text-xs font-bold text-slate-400 tracking-wider uppercase mb-1">Day {{ itinerary[dayIndex].day }}</h2>
                    <h1 class="text-xl font-bold text-slate-800">{{ itinerary[dayIndex].date }}</h1>
                </div>
                <div class="text-right">
                    <div class="text-lg font-medium text-slate-600">
                        <i :class="getWeatherIcon(itinerary[dayIndex].weather)" class="mr-1"></i>
                        {{ itinerary[dayIndex].location }}
                    </div>
                </div>
            </div>
            <div class="flex mt-4 space-x-3 overflow-x-auto no-scrollbar pb-1">
                <button v-for="(day, idx) in itinerary" :key="idx" @click="dayIndex = idx"
                        class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold transition-all"
                        :class="dayIndex === idx ? 'bg-slate-800 text-white shadow-md' : 'bg-slate-100 text-slate-400'">
                    {{ day.day }}
                </button>
            </div>
        </header>

        <main class="flex-1 overflow-y-auto p-5 pb-24 no-scrollbar">
            <div class="bg-indigo-50 p-4 rounded-xl border border-indigo-100 mb-6 shadow-sm">
                <div class="flex items-start gap-3">
                    <div class="bg-indigo-100 text-indigo-600 p-2 rounded-lg text-xs"><i class="fas fa-robot"></i></div>
                    <div>
                        <h3 class="text-xs font-bold text-indigo-800 mb-1">AI å°éŠç­†è¨˜</h3>
                        <p class="text-xs text-indigo-700 leading-relaxed">{{ itinerary[dayIndex].summary }}</p>
                    </div>
                </div>
            </div>

            <div class="relative space-y-8 pl-4">
                <div class="absolute left-[19px] top-2 bottom-4 w-0.5 bg-slate-100"></div>
                <div v-for="(place, pIdx) in itinerary[dayIndex].places" :key="pIdx" class="relative pl-8">
                    <div class="absolute left-0 top-1.5 w-[38px] text-[10px] font-bold text-slate-400 bg-white pr-1 z-10 text-right">{{ place.time }}</div>
                    <div class="absolute left-[15px] top-2 w-2.5 h-2.5 rounded-full border-2 border-white shadow-sm z-10" :class="getTypeColor(place.type)"></div>

                    <div class="bg-white rounded-xl border border-slate-100 shadow-[0_2px_8px_rgba(0,0,0,0.03)] p-4">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-[10px] font-bold px-2 py-0.5 rounded text-white" :class="getTypeClass(place.type)">{{ place.typeLabel }}</span>
                            <div class="flex gap-2">
                                <button v-if="place.mapcode" @click="copyText(place.mapcode)" class="text-[10px] bg-slate-100 px-2 py-1 rounded text-slate-500 hover:bg-slate-200">
                                    <i class="fas fa-car mr-1"></i>{{ place.mapcode }}
                                </button>
                                <button @click="openMap(place.name)" class="w-6 h-6 flex items-center justify-center rounded-full bg-blue-50 text-blue-500">
                                    <i class="fas fa-location-arrow text-xs"></i>
                                </button>
                            </div>
                        </div>
                        
                        <h3 class="font-bold text-lg text-slate-800 mb-1">{{ place.name }}</h3>
                        <p class="text-xs text-slate-500 mb-3">{{ place.desc }}</p>

                        <div v-if="place.japanese" class="mb-3 bg-orange-50 p-2 rounded border border-orange-100 flex items-center justify-between">
                            <div>
                                <div class="text-[9px] text-orange-400 uppercase font-bold">Show to Staff</div>
                                <div class="text-sm font-bold text-slate-800">{{ place.japanese }}</div>
                            </div>
                            <i class="fas fa-hand-point-left text-orange-300"></i>
                        </div>

                        <div class="flex flex-wrap gap-2">
                            <span v-for="tag in place.highlights" class="px-2 py-0.5 bg-yellow-50 text-yellow-700 text-[10px] font-medium border border-yellow-100 rounded-full">
                                <i class="fas fa-star text-[8px] mr-1"></i>{{ tag }}
                            </span>
                            <span v-if="place.booking" class="px-2 py-0.5 bg-red-50 text-red-600 text-[10px] font-bold border border-red-100 rounded-full">
                                {{ place.booking }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div v-if="currentView === 'info'" class="flex flex-col h-full bg-slate-50 overflow-y-auto pb-24">
        <header class="bg-white p-6 sticky top-0 border-b border-slate-100 shadow-sm z-10">
            <h1 class="text-2xl font-bold text-slate-800">é ç´„èˆ‡è³‡è¨Š</h1>
        </header>
        
        <div class="p-6 space-y-6">
            <section>
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Nagoya Hotel</h3>
                <div class="bg-white p-5 rounded-xl shadow-sm border border-l-4 border-l-slate-800 border-slate-100">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="font-bold text-lg text-slate-800">è¥¿éµé…’åº— Croom åå¤å±‹</div>
                            <div class="text-xs text-slate-500">Nishitetsu Hotel Croom Nagoya</div>
                        </div>
                        <span class="bg-green-100 text-green-700 text-[10px] px-2 py-1 rounded font-bold">å·²ç¢ºèª</span>
                    </div>
                    <div class="mt-4 space-y-2 text-sm text-slate-600">
                        <div class="flex items-center"><i class="fas fa-calendar-alt w-6 text-slate-400"></i> 2/25 - 2/28 (3æ™š)</div>
                        <div class="flex items-center"><i class="fas fa-hashtag w-6 text-slate-400"></i> <span class="font-mono font-bold bg-slate-100 px-1">1359041951884810</span></div>
                        <div class="flex items-center"><i class="fas fa-map-marker-alt w-6 text-slate-400"></i> 3 Chome-4-3 Nishiki, Naka Ward</div>
                        <div class="flex items-center"><i class="fas fa-phone w-6 text-slate-400"></i> <a href="tel:+81529635959" class="text-blue-500 underline">+81-52-9635959</a></div>
                    </div>
                </div>
            </section>

            <section>
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Takayama Hotel</h3>
                <div class="bg-white p-5 rounded-xl shadow-sm border border-l-4 border-l-emerald-600 border-slate-100">
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="font-bold text-lg text-slate-800">æ±æ€¥ STAY é£›é©’é«˜å±±çµä¹‹æ¹¯</div>
                            <div class="text-xs text-slate-500">Tokyu Stay Hida Takayama Musubinoyu</div>
                        </div>
                        <span class="bg-green-100 text-green-700 text-[10px] px-2 py-1 rounded font-bold">å·²ç¢ºèª</span>
                    </div>
                    <div class="mt-4 space-y-2 text-sm text-slate-600">
                        <div class="flex items-center"><i class="fas fa-calendar-alt w-6 text-slate-400"></i> 2/28 - 3/3 (3æ™š)</div>
                        <div class="flex items-center"><i class="fas fa-hashtag w-6 text-slate-400"></i> <span class="font-mono font-bold bg-slate-100 px-1">1359041951886445</span></div>
                        <div class="flex items-center"><i class="fas fa-map-marker-alt w-6 text-slate-400"></i> Hanasatomachi 4-301, Takayama</div>
                        <div class="flex items-center"><i class="fas fa-phone w-6 text-slate-400"></i> <a href="tel:+81577361109" class="text-blue-500 underline">+81-577-361109</a></div>
                    </div>
                </div>
            </section>

            <section>
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-2">Emergency</h3>
                <div class="bg-red-50 p-4 rounded-xl border border-red-100 text-red-800 text-sm">
                    <div class="flex justify-between items-center mb-2">
                        <span>ğŸ‡¯ğŸ‡µ æ•‘è­·è»Š/ç«è­¦</span>
                        <span class="font-bold text-lg">119</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span>ğŸ‘® è­¦å¯Ÿå±€</span>
                        <span class="font-bold text-lg">110</span>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <div v-if="currentView === 'budget'" class="flex flex-col h-full bg-white">
        <header class="bg-slate-800 text-white p-6 sticky top-0 z-20">
            <h1 class="text-xl font-bold">æ”¯å‡ºè¨˜å¸³</h1>
            <div class="mt-4 text-3xl font-bold">Â¥ {{ totalBudget.toLocaleString() }}</div>
        </header>
        <div class="p-6 flex-1 overflow-y-auto pb-24">
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-6">
                <div class="grid grid-cols-2 gap-3 mb-3">
                    <input v-model="newItem.name" placeholder="é …ç›®" class="bg-slate-50 p-3 rounded-lg text-sm outline-none">
                    <input v-model.number="newItem.price" type="number" placeholder="Â¥ é‡‘é¡" class="bg-slate-50 p-3 rounded-lg text-sm outline-none">
                </div>
                <button @click="addItem" class="w-full bg-slate-800 text-white py-3 rounded-lg text-sm font-bold">æ–°å¢æ”¯å‡º</button>
            </div>
            <div class="space-y-3">
                <div v-for="(item, idx) in budgetList" :key="idx" class="flex justify-between items-center border-b border-slate-100 pb-2">
                    <span class="text-sm font-medium text-slate-700">{{ item.name }}</span>
                    <div class="flex items-center">
                        <span class="text-sm font-bold text-slate-800 mr-3">Â¥{{ item.price }}</span>
                        <button @click="deleteItem(idx)" class="text-red-300"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <nav class="absolute bottom-0 w-full bg-white border-t border-slate-100 px-6 py-3 pb-safe safe-bottom flex justify-between items-center z-30 shadow-[0_-4px_20px_rgba(0,0,0,0.03)]">
        <button class="flex flex-col items-center w-16" :class="currentView === 'itinerary' ? 'text-slate-800' : 'text-slate-300'" @click="currentView = 'itinerary'">
            <i class="fas fa-map-marked-alt text-xl mb-1"></i><span class="text-[10px]">è¡Œç¨‹</span>
        </button>
        <button class="flex flex-col items-center w-16" :class="currentView === 'info' ? 'text-slate-800' : 'text-slate-300'" @click="currentView = 'info'">
            <i class="fas fa-ticket-alt text-xl mb-1"></i><span class="text-[10px]">è³‡è¨Š</span>
        </button>
        <button class="flex flex-col items-center w-16" :class="currentView === 'budget' ? 'text-slate-800' : 'text-slate-300'" @click="currentView = 'budget'">
            <i class="fas fa-calculator text-xl mb-1"></i><span class="text-[10px]">è¨˜å¸³</span>
        </button>
    </nav>

</div>

<script>
    const { createApp, ref, computed, onMounted, watch } = Vue;

    createApp({
        setup() {
            const currentView = ref('itinerary');
            const dayIndex = ref(0);
            
            // è¨˜å¸³èˆ‡å…¶ä»–é‚è¼¯
            const newItem = ref({ name: '', price: '' });
            const budgetList = ref([]);
            onMounted(() => {
                const saved = localStorage.getItem('jp_trip_budget');
                if (saved) budgetList.value = JSON.parse(saved);
            });
            watch(budgetList, (newVal) => localStorage.setItem('jp_trip_budget', JSON.stringify(newVal)), { deep: true });
            const addItem = () => { if(newItem.value.name && newItem.value.price) { budgetList.value.unshift({ ...newItem.value }); newItem.value = { name: '', price: '' }; }};
            const deleteItem = (idx) => budgetList.value.splice(idx, 1);
            const totalBudget = computed(() => budgetList.value.reduce((sum, item) => sum + item.price, 0));

            // è¡Œç¨‹è³‡æ–™ (Updated with your bookings)
            const itinerary = ref([
                {
                    day: 1, date: "2/25 (Wed)", location: "åå¤å±‹", weather: "rain",
                    summary: "æŠµé”åå¤å±‹ï¼Œå…¥ä½è¥¿éµ Croomï¼Œæ™šé¤äº«ç”¨é“åœ°å°åº¦æ–™ç†ã€‚",
                    places: [
                        { time: "14:30", name: "ä¸­éƒ¨åœ‹éš›æ©Ÿå ´ (NGO)", type: "transport", typeLabel: "æŠµé”", desc: "åéµ Î¼-Sky è‡³åå¤å±‹ç«™è½‰åœ°éµã€‚", mapcode: "123 456 789*11", highlights: [], booking: "" },
                        { time: "16:30", name: "è¥¿éµé…’åº— Croom åå¤å±‹", type: "stay", typeLabel: "å…¥ä½", desc: "Check-in. è¨‚å–®è™Ÿå·²æ›´æ–°æ–¼è³‡è¨Šé ã€‚", mapcode: "4 321 000*22", highlights: ["å¤§æµ´å ´"], booking: "Booked" },
                        { time: "18:00", name: "Indo Ryori Kalash", type: "food", typeLabel: "æ™šé¤", desc: "æ¨è–¦ï¼šCheese Naan, Butter Chicken Curryã€‚", japanese: "ãƒãƒ¼ã‚ºãƒŠãƒ³ã¨ãƒã‚¿ãƒ¼ãƒã‚­ãƒ³ã‚«ãƒ¬ãƒ¼", mapcode: "4 288 123*33", highlights: ["èµ·å¸çƒ¤é¤…"], booking: "" },
                        { time: "20:00", name: "Oasis 21", type: "spot", typeLabel: "æ™¯é»", desc: "æ°´çš„å®‡å®™èˆ¹å¤œæ™¯ã€‚", mapcode: "4 289 456*44", highlights: ["å¤œæ™¯"], booking: "" }
                    ]
                },
                {
                    day: 2, date: "2/26 (Thu)", location: "åå¤å±‹", weather: "cloud",
                    summary: "å‰åœåŠ›å…¬åœ’å…¨æ—¥éŠï¼Œæ™šä¸Šäº«ç”¨è“¬èŠè»’é°»é­šé£¯ã€‚",
                    places: [
                        { time: "09:00", name: "Konparu æ¦®åº—", type: "food", typeLabel: "æ—©é¤", desc: "å¿…é»ç‚¸è¦ä¸‰æ˜æ²»ï¼Œå¯å¤–å¸¶ã€‚", japanese: "ã‚¨ãƒ“ãƒ•ãƒ©ã‚¤ã‚µãƒ³ãƒ‰", mapcode: "4 288 555*12", highlights: ["åç‰©ä¸‰æ˜æ²»"], booking: "" },
                        { time: "12:00", name: "å‰åœåŠ›å…¬åœ’", type: "spot", typeLabel: "æ™¯é»", desc: "å¤§å€‰åº«åƒè§€ã€‚", mapcode: "30 514 123*55", highlights: ["åå ´é¢å±•"], booking: "Ticket Needed" },
                        { time: "18:30", name: "ç†±ç”°è“¬èŠè»’ (æ¾å‚å±‹)", type: "food", typeLabel: "æ™šé¤", desc: "é°»é­šé£¯ä¸‰åƒã€‚", japanese: "ã²ã¤ã¾ã¶ã—", mapcode: "4 257 888*66", highlights: ["å¿…åƒ"], booking: "" }
                    ]
                },
                {
                    day: 3, date: "2/27 (Fri)", location: "åå¤å±‹", weather: "sun",
                    summary: "æ°´æ—é¤¨çœ‹è™é¯¨ï¼Œä¸‹åˆé€›å¤§é ˆå•†åº—è¡—ã€‚",
                    places: [
                        { time: "09:30", name: "åå¤å±‹æ¸¯æ°´æ—é¤¨", type: "spot", typeLabel: "æ™¯é»", desc: "è™é¯¨èˆ‡æµ·è±šè¡¨æ¼”ã€‚", mapcode: "4 065 123*77", highlights: ["è™é¯¨"], booking: "" },
                        { time: "13:30", name: "çŸ¢å ´ç‚¸è±¬æ’", type: "food", typeLabel: "åˆé¤", desc: "éµæ¿å‘³å™Œè±¬æ’ã€‚", japanese: "é‰„æ¿ã¨ã‚“ã‹ã¤", mapcode: "4 288 999*88", highlights: ["å‘³å™Œè±¬æ’"], booking: "" },
                        { time: "15:00", name: "å¤§é ˆå•†åº—è¡—", type: "spot", typeLabel: "è³¼ç‰©", desc: "ä¸‰è¼ªç¥ç¤¾ã€Seriaã€æ„›éº—çµ²å•†åº—ã€‚", mapcode: "4 288 444*99", highlights: ["è³¼ç‰©"], booking: "" }
                    ]
                },
                {
                    day: 4, date: "2/28 (Sat)", location: "é«˜å±±", weather: "snow",
                    summary: "å‰å¾€é›ªåœ‹é«˜å±±ï¼Œå…¥ä½æ±æ€¥ STAYï¼Œäº«å—æº«æ³‰èˆ‡é£›é©’ç‰›ã€‚",
                    places: [
                        { time: "09:00", name: "JR ç‰¹æ€¥ Hida", type: "transport", typeLabel: "ç§»å‹•", desc: "å‰å¾€é«˜å±±ï¼Œç´„2.5å°æ™‚ã€‚", mapcode: "", highlights: ["å³å´é¢¨æ™¯"], booking: "JR Pass" },
                        { time: "12:00", name: "æ±æ€¥ STAY é£›é©’é«˜å±±çµä¹‹æ¹¯", type: "stay", typeLabel: "å…¥ä½", desc: "é£¯åº—å°±åœ¨è»Šç«™æ—ï¼Œæœ‰æº«æ³‰ã€‚", mapcode: "191 195 222*11", highlights: ["æ–°é£¯åº—", "æº«æ³‰"], booking: "Booked" },
                        { time: "13:00", name: "é«˜å±±è€è¡—", type: "spot", typeLabel: "é€›è¡—", desc: "é£›é©’ç‰›æ¡å£½å¸ã€‚", japanese: "é£›é¨¨ç‰›ã«ãã‚Šå¯¿å¸", mapcode: "191 196 333*22", highlights: ["è€è¡—"], booking: "" },
                        { time: "18:00", name: "å‘³è—å¤©åœ‹", type: "food", typeLabel: "æ™šé¤", desc: "é«˜å±±å¿…åƒç‡’è‚‰ã€‚", japanese: "é£›é¨¨ç‰›ç››ã‚Šåˆã‚ã›", mapcode: "191 195 444*33", highlights: ["ç‡’è‚‰"], booking: "éœ€é ç´„" }
                    ]
                },
                {
                    day: 5, date: "3/1 (Sun)", location: "ç™½å·é„‰", weather: "snow",
                    summary: "ä¸–ç•Œéºç”¢ç™½å·é„‰ä¸€æ—¥éŠã€‚",
                    places: [
                        { time: "09:00", name: "æ¿ƒé£›å·´å£«", type: "transport", typeLabel: "ç§»å‹•", desc: "å‰å¾€ç™½å·é„‰ã€‚", mapcode: "", highlights: [], booking: "Bus Ticket" },
                        { time: "10:00", name: "ç™½å·é„‰åˆæŒæ‘", type: "spot", typeLabel: "æ™¯é»", desc: "å’Œç”°å®¶ã€å±•æœ›å°ã€‚", mapcode: "549 019 123*55", highlights: ["åˆæŒé€ "], booking: "" },
                        { time: "18:00", name: "ä¸¸æ˜", type: "food", typeLabel: "æ™šé¤", desc: "é£›é©’ç‰›æ–™ç†ã€‚", japanese: "é£›é¨¨ç‰›", mapcode: "191 195 666*66", highlights: [], booking: "" }
                    ]
                },
                {
                    day: 6, date: "3/2 (Mon)", location: "æ–°ç©—é«˜", weather: "snow",
                    summary: "æ–°ç©—é«˜é›™å±¤çºœè»Šèˆ‡å¹³æ¹¯æº«æ³‰ã€‚",
                    places: [
                        { time: "08:40", name: "æ–°ç©—é«˜çºœè»Š", type: "spot", typeLabel: "æ™¯é»", desc: "é›™å±¤çºœè»Šçœ‹é›ªå±±ã€‚", mapcode: "898 045 123*88", highlights: ["çºœè»Š"], booking: "" },
                        { time: "14:00", name: "å¹³æ¹¯ä¹‹æ£®", type: "spot", typeLabel: "æº«æ³‰", desc: "é›ªä¸­éœ²å¤©æº«æ³‰ã€‚", mapcode: "620 743 123*99", highlights: ["æ—¥æ­¸æº«æ³‰"], booking: "" },
                         { time: "18:00", name: "äº¬ã‚„ (Kyoya)", type: "food", typeLabel: "æ™šé¤", desc: "é„‰åœŸæ–™ç†ã€‚", japanese: "æœ´è‘‰å‘³å™Œ", mapcode: "191 165 777*00", highlights: ["æœ´è‘‰å‘³å™Œ"], booking: "" }
                    ]
                },
                {
                    day: 7, date: "3/3 (Tue)", location: "æ©Ÿå ´", weather: "sun",
                    summary: "æœå¸‚æœ€å¾Œå·¡ç¦®ï¼Œå‰å¾€æ©Ÿå ´è¿”ç¨‹ã€‚",
                    places: [
                        { time: "08:00", name: "å®®å·æœå¸‚", type: "spot", typeLabel: "é€›è¡—", desc: "è²·è˜‹æœã€å‘³å™Œç…é¤…ã€‚", mapcode: "191 197 123*11", highlights: ["æœå¸‚"], booking: "" },
                        { time: "15:30", name: "åéµå·´å£«", type: "transport", typeLabel: "ç§»å‹•", desc: "å‰å¾€æ©Ÿå ´ã€‚", mapcode: "", highlights: [], booking: "Bus Ticket" },
                        { time: "21:00", name: "ä¸­éƒ¨åœ‹éš›æ©Ÿå ´", type: "transport", typeLabel: "èµ·é£›", desc: "Flight back home.", mapcode: "123 456 789*99", highlights: [], booking: "" }
                    ]
                }
            ]);

            const getTypeColor = (type) => ({ food: 'bg-orange-400 border-orange-400', transport: 'bg-slate-400 border-slate-400', stay: 'bg-emerald-500 border-emerald-500', spot: 'bg-indigo-500 border-indigo-500' }[type] || 'bg-slate-500');
            const getTypeClass = (type) => ({ food: 'bg-orange-400', transport: 'bg-slate-400', stay: 'bg-emerald-500', spot: 'bg-indigo-500' }[type] || 'bg-slate-500');
            const getWeatherIcon = (w) => ({ rain: 'fas fa-cloud-showers-heavy text-blue-400', snow: 'fas fa-snowflake text-slate-300', cloud: 'fas fa-cloud text-slate-400', sun: 'fas fa-sun text-yellow-500' }[w] || 'fas fa-sun');
            
            const openMap = (name) => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(name + ' Japan')}`, '_blank');
            const copyText = (text) => { navigator.clipboard.writeText(text); alert('MapCode copied: ' + text); };

            return { currentView, dayIndex, itinerary, getTypeColor, getTypeClass, getWeatherIcon, openMap, copyText, newItem, budgetList, addItem, deleteItem, totalBudget };
        }
    }).mount('#app');
</script>
</body>
</html>
